(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[592],{8446:(e,t,r)=>{"use strict";r.d(t,{v:()=>c});var o=r(4762),n=r(7716),i=r(5590);let c=(()=>{class e{constructor(e){this.indexedDBService=e}addBarber(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction(["barber"],"readwrite");t.objectStore("barber").add({name:e,profits:0,totalContributions:0,works:[]}).onerror=function(e){console.log("error: "+e)},t.oncomplete=function(e){console.log("succes: "+e)}})}getBarber(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction("barber","readonly").objectStore("barber").index("name");t.get(e).onsuccess=function(e){console.log(e.target.result)},t.get(e).onerror=function(e){alert("not found")}})}getBarbers(){return(0,o.mG)(this,void 0,void 0,function*(){let e=this.indexedDBService.db.result.transaction(["barber"],"readonly"),t=e.objectStore("barber"),r=[];return t.openCursor().onsuccess=yield function(e){let t=e.target.result;null!==t&&(r.push(t.value),t.continue())},e.oncomplete=yield function(){return r},r})}addWork(e){return(0,o.mG)(this,void 0,void 0,function*(){console.log(e);let t=this.indexedDBService.db.result.transaction(["barber"],"readwrite").objectStore("barber"),r=t.index("id");r.get(e.work.barber).onsuccess=function(r){let o=r.target.result;o.works.push(e.work);let n=t.put({id:o.id,name:o.name,profits:o.profits,totalContributions:o.totalContributions,works:o.works});n.onerror=function(e){console.log("error: "+e)},n.oncomplete=function(e){console.log("succes: "+e)}},r.get(e.work.barber).onerror=function(e){alert("Usuario no registrado en la Base de Datos")}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(i.H))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7409:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var o=r(4762),n=r(7716),i=r(5590),c=r(7779);let s=(()=>{class e{constructor(e,t){this.indexedDBService=e,this.settings=t}addClient(e,t,r){return(0,o.mG)(this,void 0,void 0,function*(){let o=this.indexedDBService.db.result.transaction(["client"],"readwrite");o.objectStore("client").add({id:t,name:e,member:r,points:0,visits:[],spent:0}).onerror=function(e){console.log("error: "+e)},o.oncomplete=function(e){console.log("success: "+e)}})}getClients(){return(0,o.mG)(this,void 0,void 0,function*(){let e=this.indexedDBService.db.result.transaction(["client"],"readonly"),t=e.objectStore("client"),r=[];return t.openCursor().onsuccess=yield function(e){let t=e.target.result;null!==t&&(r.push(t.value),t.continue())},e.oncomplete=yield function(){return r},r})}getClient(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction("client","readonly").objectStore("client").index("id"),r=(e,t,r=!1)=>{console.log("asdasdasdasd"),r?this[e][r]=t:this[e]=t};t.get(e).onsuccess=function(e){let t=e.target.result;return t?(console.log(t),r("settings",t,"clientSelected"),t):(console.log("no existe"),!1)},t.get(e).onerror=function(e){return alert("not found"),!1}})}addVisit(e){return(0,o.mG)(this,void 0,void 0,function*(){console.log(e);let t=this.indexedDBService.db.result.transaction(["client"],"readwrite").objectStore("client"),r=t.index("id");r.get(e.work.clientId).onsuccess=function(r){let o=r.target.result;o.visits.push(e.work);let n=t.put({id:o.id,name:o.name,points:o.points+e.work.priceTotal/100,spent:o.spent+e.work.priceTotal,visits:o.visits});n.onerror=function(e){console.log("error: "+e)},n.oncomplete=function(e){console.log("succes: "+e)}},r.get(e.work.clientId).onerror=function(e){alert("Usuario no registrado en la Base de Datos")}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(i.H),n.LFG(c.g))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3831:(e,t,r)=>{"use strict";r.d(t,{s:()=>c});var o=r(4762),n=r(7716),i=r(5590);let c=(()=>{class e{constructor(e){this.indexedDBService=e}getProducts(){return(0,o.mG)(this,void 0,void 0,function*(){let e=this.indexedDBService.db.result.transaction(["product"],"readonly"),t=e.objectStore("product"),r=[];return t.openCursor().onsuccess=yield function(e){let t=e.target.result;null!==t&&(r.push(t.value),t.continue())},e.oncomplete=yield function(){return r},r})}addProduct(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction(["product"],"readwrite");t.objectStore("product").add({name:e.name,price:e.price,type:"product",stock:e.stock}).onerror=function(e){console.log("error: "+e)},t.oncomplete=function(e){console.log("success: "+e)}})}getProduct(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction("product","readonly").objectStore("product").index("name");t.get(e).onsuccess=e=>{let t=e.target.result;return t?(this.product=t,!0):(console.log("no existe"),!1)},t.get(e).onerror=function(e){return alert("not found"),!1}})}updateProduct(e,t={}){return(0,o.mG)(this,void 0,void 0,function*(){let r=this.indexedDBService.db.result.transaction("product","readwrite").objectStore("product"),o=r.index("name");o.get(e).onsuccess=e=>{let o=e.target.result;if(!o)return console.log("no existe"),!1;r.put({id:o.id,name:t.name||o.name,type:t.type||o.type,stock:t.stock||o.stock,price:t.price||o.price})},o.get(e).onerror=function(e){return alert("not found"),!1}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(i.H))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1954:(e,t,r)=>{"use strict";r.d(t,{r:()=>c});var o=r(4762),n=r(7716),i=r(5590);let c=(()=>{class e{constructor(e){this.indexedDBService=e}addService(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction(["service"],"readwrite");t.objectStore("service").add({name:e.name,price:e.price,type:"service",description:"service"}).onerror=function(e){console.log("error: "+e)},t.oncomplete=function(e){console.log("success: "+e)}})}getServices(){return(0,o.mG)(this,void 0,void 0,function*(){let e=this.indexedDBService.db.result.transaction(["service"],"readonly"),t=e.objectStore("service"),r=[];return t.openCursor().onsuccess=yield function(e){let t=e.target.result;null!==t&&(r.push(t.value),t.continue())},e.oncomplete=yield function(){return r},r})}getService(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=this.indexedDBService.db.result.transaction("service","readonly").objectStore("service").index("name");t.get(e).onsuccess=e=>{let t=e.target.result;return t?(this.service=t,!0):(console.log("no existe"),!1)},t.get(e).onerror=function(e){return alert("not found"),!1}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(i.H))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7779:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var o=r(7716);let n=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1802:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var o=r(7716);let n=(()=>{class e{constructor(){}createUser(e){if(null===localStorage.getItem("barbershop-accounts")){let t=[];return t.push(e),void window.localStorage.setItem("barbershop-accounts",JSON.stringify(t))}let t=JSON.parse(window.localStorage.getItem("barbershop-accounts"));t.push(e),window.localStorage.setItem("barbershop-accounts",JSON.stringify(t))}login(e){const t=JSON.parse(localStorage.getItem("barbershop-accounts")).find(t=>t.email===e.email&&t.password===e.password);window.localStorage.setItem("account",JSON.stringify(t))}logout(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4762:(e,t,r)=>{"use strict";function o(e,t,r,o){return new(r||(r=Promise))(function(n,i){function c(e){try{u(o.next(e))}catch(t){i(t)}}function s(e){try{u(o.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(c,s)}u((o=o.apply(e,t||[])).next())})}r.d(t,{mG:()=>o})}}]);